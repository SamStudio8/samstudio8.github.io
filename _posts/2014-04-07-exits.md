---
layout: post
title: Exit codes, `expr` and `set -e`
---

The kernels on our cluster clients have recently been updated after I inadvertently stumbled across an [old kernel bug](http://wiki.linux-nfs.org/wiki/index.php/NFS:_directory_XXX_contains_a_readdir_loop_seems_to_be_triggered_by_well-behaving_server) that caused erratic behaviour when NFS tries to open a directory containing many files that are being written to simultaneously (more on which is another post in itself really, as usual).

The update seems to have 


caused a `boost` library version mismatch, causing execution of my script's `rapsearch` command to terminate with `SIGABRT`, dumping the core and outputting the following to `stderr`:

```
terminate called after throwing an instance of 'boost::archive::archive_exception'
  what():  invalid signature
/cm/local/apps/sge/current/spool/node001/job_scripts/1439428: line 282:  4846 Aborted                 
(core dumped) rapsearch -q $QUERY -d /ibers/ernie/groups/rumenISPG/Databases/RAPsearch_bacteria_1 -u 1 -z 5 -e 0.00001 > $OUTFILE
```

Our sysadmin suspects that Sun Grid Engine (the job scheduler) attempts to cache its own copy of some associated libraries and binaries to support checkpoints which may have caused some sort of version mismatch for the `boost` library on the compute node.
